# 节点重命名脚本 - 只保留国家名

## 功能说明

这个脚本可以自动识别节点名称中的国家信息，并将节点重命名为只保留国家名，去掉其他冗余信息。

### 特性

- ✅ 支持中文国家/地区名识别（如：香港、台湾、新加坡等）
- ✅ 支持 Emoji 旗帜识别（如：🇭🇰、🇸🇬、🇯🇵等）
- ✅ 支持英文国家名和缩写（如：HK、SG、US等）
- ✅ 自动为重复国家添加递增序号（第二个开始为 02、03 等）
- ✅ 支持 40+ 常见国家/地区

## 使用方法

### 在 Sub-Store 前端界面中使用

1. 打开 Sub-Store 前端界面
2. 选择你要处理的订阅
3. 点击"添加操作"
4. 选择"脚本操作"
5. 在脚本输入框中，粘贴 `rename-by-country.js` 的内容
6. 保存并预览效果

### 示例效果

**处理前：**
```
香港🇭🇰-BG-HY | 中南部移动专线
香港🇭🇰-BG-HY
新加坡 Premium Node | IEPL专线
日本 Tokyo-01 | NTT
美国 US-West | 洛杉矶
香港 CN2 GIA
台湾🇹🇼 Hinet
```

**处理后：**
```
香港
香港02
新加坡
日本
美国
香港03
台湾
```

## 支持的国家/地区列表

### 亚太地区
- 香港 (HK, Hong Kong, 🇭🇰)
- 台湾 (TW, Taiwan, 🇹🇼)
- 新加坡 (SG, Singapore, 🇸🇬)
- 日本 (JP, Japan, 🇯🇵)
- 韩国 (KR, Korea, 🇰🇷)
- 泰国 (TH, Thailand, 🇹🇭)
- 马来西亚 (MY, Malaysia, 🇲🇾)
- 越南 (VN, Vietnam, 🇻🇳)
- 菲律宾 (PH, Philippines, 🇵🇭)
- 印度尼西亚 (ID, Indonesia, 🇮🇩)
- 印度 (IN, India, 🇮🇳)
- 澳大利亚/澳洲 (AU, Australia, 🇦🇺)

### 北美地区
- 美国 (US, USA, United States, 🇺🇸)
- 加拿大 (CA, Canada, 🇨🇦)

### 欧洲地区
- 英国 (UK, United Kingdom, 🇬🇧)
- 德国 (DE, Germany, 🇩🇪)
- 法国 (FR, France, 🇫🇷)
- 荷兰 (NL, Netherlands, 🇳🇱)
- 意大利 (IT, Italy, 🇮🇹)
- 西班牙 (ES, Spain, 🇪🇸)
- 瑞士 (CH, Switzerland, 🇨🇭)
- 波兰 (PL, Poland, 🇵🇱)
- 瑞典 (SE, Sweden, 🇸🇪)
- 挪威 (NO, Norway, 🇳🇴)
- 芬兰 (FI, Finland, 🇫🇮)
- 丹麦 (DK, Denmark, 🇩🇰)
- 爱尔兰 (IE, Ireland, 🇮🇪)

### 其他地区
- 俄罗斯 (RU, Russia, 🇷🇺)
- 土耳其 (TR, Turkey, 🇹🇷)
- 以色列 (IL, Israel, 🇮🇱)
- 阿联酋 (AE, UAE, 🇦🇪)
- 南非 (ZA, South Africa, 🇿🇦)
- 阿根廷 (AR, Argentina, 🇦🇷)
- 巴西 (BR, Brazil, 🇧🇷)

## 自定义修改

如果你需要添加更多国家或修改识别规则，可以编辑脚本中的 `countryMap` 和 `emojiMap` 对象。

### 添加新国家示例

```javascript
// 在 countryMap 中添加
'澳门': '澳门',
'MO': '澳门',
'Macau': '澳门',

// 在 emojiMap 中添加
'🇲🇴': '澳门',
```

### 修改国家名称

如果你想使用不同的国家名称显示，只需修改映射值：

```javascript
// 将 "香港" 改为 "HK"
'香港': 'HK',
'HK': 'HK',
'Hong Kong': 'HK',
```

## 注意事项

1. **识别优先级**：脚本首先识别 Emoji 旗帜，然后识别文字（中文/英文）
2. **未识别节点**：如果节点名称中没有识别到国家信息，将保持原名不变
3. **序号格式**：序号从 02 开始（第一个不加序号），格式为两位数字（02、03...99）
4. **大小写不敏感**：英文国家名识别不区分大小写（hk、HK、Hk 都可以）

## 快捷脚本语法

如果你使用的是 Sub-Store 2.14.89+ 版本，也可以使用快捷脚本语法（但功能有限）：

```javascript
// 简单的重命名示例（不支持复杂的国家识别和计数）
$server.name = '前缀-' + $server.name
```

**注意**：对于复杂的国家识别和序号递增功能，建议使用完整的 `function operator()` 格式。

## 故障排除

### 问题：某些节点没有被重命名

**可能原因**：
- 节点名称中的国家标识不在支持列表中
- 国家名称拼写不标准

**解决方法**：
- 检查控制台输出的"未识别到国家"信息
- 手动添加该国家的识别规则到脚本中

### 问题：序号不连续

**原因**：脚本按照节点在订阅中的顺序进行处理和计数

**这是正常的**：如果你的订阅中节点顺序是"香港-新加坡-香港-日本-香港"，那么重命名后会是"香港-新加坡-香港02-日本-香港03"

## 版本要求

- Sub-Store 后端版本：>= 2.14.88（支持脚本操作）
- 建议使用最新版本以获得最佳兼容性

## 许可证

本脚本遵循 Sub-Store 项目的 GPL V3 许可证。

